<!-- Modal Popup -->
<div id="dataModal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h3>รายการไฟล์ที่โหลดได้</h3>
    <table id="fileTable" class="display" style="width:100%">
      <thead>
        <tr>
          <th>ชื่อไฟล์</th>
          <th>ประเภท</th>
          <th>ลิงก์</th>
        </tr>
      </thead>
      <tbody>
        <!-- จะเพิ่มด้วย JS -->
      </tbody>
    </table>
  </div>
</div>

<script>
  const dummyData = [
    { name: "แบบเรียน.pdf", type: "PDF", link: "https://drive.google.com/file/d/123456/view" },
    { name: "ภาพกิจกรรม.jpg", type: "รูปภาพ", link: "https://drive.google.com/file/d/234567/view" },
    { name: "รายงาน.docx", type: "เอกสาร", link: "https://drive.google.com/file/d/345678/view" },
  ];

  const modal = document.getElementById("dataModal");
  const spanClose = document.querySelector(".close");

  document.querySelector("form").addEventListener("submit", function(e) {
    e.preventDefault();

    // ล้างข้อมูลเก่า
    $('#fileTable').DataTable().clear().destroy();
    const tbody = document.querySelector("#fileTable tbody");
    tbody.innerHTML = "";

    // แสดงข้อมูล (เปลี่ยนจาก dummyData เป็นข้อมูลจริงในอนาคต)
    dummyData.forEach(file => {
      const row = `
        <tr>
          <td>${file.name}</td>
          <td>${file.type}</td>
          <td><a href="${file.link}" target="_blank">เปิดไฟล์</a></td>
        </tr>`;
      tbody.insertAdjacentHTML("beforeend", row);
    });

    // เปิด modal และสร้าง DataTable
    modal.style.display = "block";
    $('#fileTable').DataTable();
  });

  // ปิด popup
  spanClose.onclick = () => modal.style.display = "none";
  window.onclick = e => { if (e.target == modal) modal.style.display = "none"; };
</script>
